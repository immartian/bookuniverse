<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISBN Global View</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        svg {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>ISBN Global View</h1>
    <svg id="visualization" width="1000" height="800"></svg>

    <script>
        const svg = d3.select("#visualization");

        fetch('/api/global_view')
            .then(response => response.json())
            .then(data => {
                const cellWidth = 1;  // Width of each cell
                const cellHeight = 1;  // Height of each cell

                // Render grid
                svg.selectAll("rect")
                    .data(data.flat())
                    .enter()
                    .append("rect")
                    .attr("x", (d, i) => (i % 1000) * cellWidth)
                    .attr("y", (d, i) => Math.floor(i / 1000) * cellHeight)
                    .attr("width", cellWidth)
                    .attr("height", cellHeight)
                    .attr("fill", d => `rgb(${d[0]}, ${d[1]}, ${d[2]})`);
            });
    </script>
</body>
</html>
