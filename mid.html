<!--  -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISBN Canvas Roaming with Country/Language Highlight</title>
    <style>
        body { margin: 0; }
        #mainCanvas {
            position: absolute;
            z-index: 1;
            cursor: grab;
        }
        #overlayCanvas {
            position: absolute;
            z-index: 2;
            pointer-events: none; /* Prevent interaction with the overlay canvas */
        }
    </style>
</head>
<body>
    <canvas id="mainCanvas" width="1000" height="800"></canvas>
    <canvas id="overlayCanvas" width="1000" height="800"></canvas>

    <script>
        const mainCanvas = document.getElementById('mainCanvas');
        const overlayCanvas = document.getElementById('overlayCanvas');
        const ctx = mainCanvas.getContext('2d');
        const overlayCtx = overlayCanvas.getContext('2d');

        const canvasWidth = 1000;
        const canvasHeight = 800;
        const imageWidth = 5000;
        const imageHeight = 4000;

        const isbnPerPixel = 100;  // 100 ISBNs per pixel
        let offsetX = 0, offsetY = 0;

        let imageData = new Image();
        imageData.src = './all_isbns_smaller10x.png'; // Your image source

        let dragging = false;
        let startX, startY;

        const countries = {
"978-0": "English language ðŸ‡¬ðŸ‡§ðŸ‡ºðŸ‡¸ðŸ‡¨ðŸ‡¦ðŸ‡¦ðŸ‡ºðŸ‡³ðŸ‡¿ðŸ‡¿ðŸ‡¦",
"978-1": "English language ðŸ‡¬ðŸ‡§ðŸ‡ºðŸ‡¸ðŸ‡¨ðŸ‡¦ðŸ‡¦ðŸ‡ºðŸ‡³ðŸ‡¿ðŸ‡¿ðŸ‡¦",
"978-2": "French language ðŸ‡«ðŸ‡·ðŸ‡¨ðŸ‡¦ðŸ‡§ðŸ‡ªðŸ‡¨ðŸ‡­ðŸ‡±ðŸ‡ºðŸ‡§ðŸ‡®",
"978-3": "German language ðŸ‡©ðŸ‡ªðŸ‡¦ðŸ‡¹ðŸ‡¨ðŸ‡­",
"978-4": "Japan ðŸ‡¯ðŸ‡µ",
"978-5": "former U.S.S.R",
"978-600": "Iran ðŸ‡®ðŸ‡·",
"978-601": "Kazakhstan ðŸ‡°ðŸ‡¿",
"978-602": "Indonesia ðŸ‡®ðŸ‡©",
"978-603": "Saudi Arabia ðŸ‡¸ðŸ‡¦",
"978-604": "Vietnam ðŸ‡»ðŸ‡³",
"978-605": "Turkey ðŸ‡¹ðŸ‡·",
"978-606": "Romania ðŸ‡·ðŸ‡´",
"978-607": "Mexico ðŸ‡²ðŸ‡½",
"978-608": "North Macedonia ðŸ‡²ðŸ‡°",
"978-609": "Lithuania ðŸ‡±ðŸ‡¹",
"978-611": "Thailand ðŸ‡¹ðŸ‡­",
"978-612": "Peru ðŸ‡µðŸ‡ª",
"978-613": "Mauritius ðŸ‡²ðŸ‡º",
"978-614": "Lebanon ðŸ‡±ðŸ‡§",
"978-615": "Hungary ðŸ‡­ðŸ‡º",
"978-616": "Thailand ðŸ‡¹ðŸ‡­",
"978-617": "Ukraine ðŸ‡ºðŸ‡¦",
"978-618": "Greece ðŸ‡¬ðŸ‡·",
"978-619": "Bulgaria ðŸ‡§ðŸ‡¬",
"978-620": "Mauritius ðŸ‡²ðŸ‡º",
"978-621": "Philippines ðŸ‡µðŸ‡­",
"978-622": "Iran ðŸ‡®ðŸ‡·",
"978-623": "Indonesia ðŸ‡®ðŸ‡©",
"978-624": "Sri Lanka ðŸ‡±ðŸ‡°",
"978-625": "Turkey ðŸ‡¹ðŸ‡·",
"978-626": "Taiwan ðŸ‡¹ðŸ‡¼",
"978-627": "Pakistan ðŸ‡µðŸ‡°",
"978-628": "Colombia ðŸ‡¨ðŸ‡´",
"978-629": "Malaysia ðŸ‡²ðŸ‡¾",
"978-630": "Romania ðŸ‡·ðŸ‡´",
"978-631": "Argentina ðŸ‡¦ðŸ‡·",
"978-65": "Brazil ðŸ‡§ðŸ‡·",
"978-7": "China, People's Republic ðŸ‡¨ðŸ‡³",
"978-80": "former Czechoslovakia ðŸ‡¨ðŸ‡¿ðŸ‡¸ðŸ‡°",
"978-81": "India ðŸ‡®ðŸ‡³",
"978-82": "Norway ðŸ‡³ðŸ‡´",
"978-83": "Poland ðŸ‡µðŸ‡±",
"978-84": "Spain ðŸ‡ªðŸ‡¸",
"978-85": "Brazil ðŸ‡§ðŸ‡·",
"978-86": "former Yugoslavia ðŸ‡·ðŸ‡¸",
"978-87": "Denmark ðŸ‡©ðŸ‡°",
"978-88": "Italy ðŸ‡®ðŸ‡¹",
"978-89": "Korea, Republic ðŸ‡°ðŸ‡·",
"978-90": "Netherlands ðŸ‡³ðŸ‡±",
"978-91": "Sweden ðŸ‡¸ðŸ‡ª",
"978-92": "International NGO Publishers and EU Organizations ðŸ‡ªðŸ‡º",
"978-93": "India ðŸ‡®ðŸ‡³",
"978-94": "Netherlands ðŸ‡³ðŸ‡±",
"978-950": "Argentina ðŸ‡¦ðŸ‡·",
"978-951": "Finland ðŸ‡«ðŸ‡®",
"978-952": "Finland ðŸ‡«ðŸ‡®",
"978-953": "Croatia ðŸ‡­ðŸ‡·",
"978-954": "Bulgaria ðŸ‡§ðŸ‡¬",
"978-955": "Sri Lanka ðŸ‡±ðŸ‡°",
"978-956": "Chile ðŸ‡¨ðŸ‡±",
"978-957": "Taiwan ðŸ‡¹ðŸ‡¼",
"978-958": "Colombia ðŸ‡¨ðŸ‡´",
"978-959": "Cuba ðŸ‡¨ðŸ‡º",
"978-960": "Greece ðŸ‡¬ðŸ‡·",
"978-961": "Slovenia ðŸ‡¸ðŸ‡®",
"978-962": "Hong Kong ðŸ‡­ðŸ‡°",
"978-963": "Hungary ðŸ‡­ðŸ‡º",
"978-964": "Iran ðŸ‡®ðŸ‡·",
"978-965": "Israel ðŸ‡®ðŸ‡±",
"978-966": "Ukraine ðŸ‡ºðŸ‡¦",
"978-967": "Malaysia ðŸ‡²ðŸ‡¾",
"978-968": "Mexico ðŸ‡²ðŸ‡½",
"978-969": "Pakistan ðŸ‡µðŸ‡°",
"978-970": "Mexico ðŸ‡²ðŸ‡½",
"978-971": "Philippines ðŸ‡µðŸ‡­",
"978-972": "Portugal ðŸ‡µðŸ‡¹",
"978-973": "Romania ðŸ‡·ðŸ‡´",
"978-974": "Thailand ðŸ‡¹ðŸ‡­",
"978-975": "Turkey ðŸ‡¹ðŸ‡·",
"978-976": "Caribbean Community ðŸ‡§ðŸ‡§ðŸ‡§ðŸ‡¸",
"978-977": "Egypt ðŸ‡ªðŸ‡¬",
"978-978": "Nigeria ðŸ‡³ðŸ‡¬",
"978-979": "Indonesia ðŸ‡®ðŸ‡©",
"978-980": "Venezuela ðŸ‡»ðŸ‡ª",
"978-981": "Singapore ðŸ‡¸ðŸ‡¬",
"978-982": "South Pacific ðŸ‡µðŸ‡¬",
"978-983": "Malaysia ðŸ‡²ðŸ‡¾",
"978-984": "Bangladesh ðŸ‡§ðŸ‡©",
"978-985": "Belarus ðŸ‡§ðŸ‡¾",
"978-986": "Taiwan ðŸ‡¹ðŸ‡¼",
"978-987": "Argentina ðŸ‡¦ðŸ‡·",
"978-988": "Hong Kong ðŸ‡­ðŸ‡°",
"978-989": "Portugal ðŸ‡µðŸ‡¹",
"978-9910": "Uzbekistan ðŸ‡ºðŸ‡¿",
"978-9911": "Montenegro ðŸ‡²ðŸ‡ª",
"978-9912": "Tanzania ðŸ‡¹ðŸ‡¿",
"978-9913": "Uganda ðŸ‡ºðŸ‡¬",
"978-9914": "Kenya ðŸ‡°ðŸ‡ª",
"978-9915": "Uruguay ðŸ‡ºðŸ‡¾",
"978-9916": "Estonia ðŸ‡ªðŸ‡ª",
"978-9917": "Bolivia ðŸ‡§ðŸ‡´",
"978-9918": "Malta ðŸ‡²ðŸ‡¹",
"978-9919": "Mongolia ðŸ‡²ðŸ‡³",
"978-9920": "Morocco ðŸ‡²ðŸ‡¦",
"978-9921": "Kuwait ðŸ‡°ðŸ‡¼",
"978-9922": "Iraq ðŸ‡®ðŸ‡¶",
"978-9923": "Jordan ðŸ‡¯ðŸ‡´",
"978-9924": "Cambodia ðŸ‡°ðŸ‡­",
"978-9925": "Cyprus ðŸ‡¨ðŸ‡¾",
"978-9926": "Bosnia and Herzegovina ðŸ‡§ðŸ‡¦",
"978-9927": "Qatar ðŸ‡¶ðŸ‡¦",
"978-9928": "Albania ðŸ‡¦ðŸ‡±",
"978-9929": "Guatemala ðŸ‡¬ðŸ‡¹",
"978-9930": "Costa Rica ðŸ‡¨ðŸ‡·",
"978-9931": "Algeria ðŸ‡©ðŸ‡¿",
"978-9932": "Lao People's Democratic Republic ðŸ‡±ðŸ‡¦",
"978-9933": "Syria ðŸ‡¸ðŸ‡¾",
"978-9934": "Latvia ðŸ‡±ðŸ‡»",
"978-9935": "Iceland ðŸ‡®ðŸ‡¸",
"978-9936": "Afghanistan ðŸ‡¦ðŸ‡«",
"978-9937": "Nepal ðŸ‡³ðŸ‡µ",
"978-9938": "Tunisia ðŸ‡¹ðŸ‡³",
"978-9939": "Armenia ðŸ‡¦ðŸ‡²",
"978-9940": "Montenegro ðŸ‡²ðŸ‡ª",
"978-9941": "Georgia ðŸ‡¬ðŸ‡ª",
"978-9942": "Ecuador ðŸ‡ªðŸ‡¨",
"978-9943": "Uzbekistan ðŸ‡ºðŸ‡¿",
"978-9944": "Turkey ðŸ‡¹ðŸ‡·",
"978-9945": "Dominican Republic ðŸ‡©ðŸ‡´",
"978-9946": "Korea, P.D.R. ðŸ‡°ðŸ‡µ",
"978-9947": "Algeria ðŸ‡©ðŸ‡¿",
"978-9948": "United Arab Emirates ðŸ‡¦ðŸ‡ª",
"978-9949": "Estonia ðŸ‡ªðŸ‡ª",
"978-9950": "Palestine ðŸ‡µðŸ‡¸",
"978-9951": "Kosova ðŸ‡½ðŸ‡°",
"978-9952": "Azerbaijan ðŸ‡¦ðŸ‡¿",
"978-9953": "Lebanon ðŸ‡±ðŸ‡§",
"978-9954": "Morocco ðŸ‡²ðŸ‡¦",
"978-9955": "Lithuania ðŸ‡±ðŸ‡¹",
"978-9956": "Cameroon ðŸ‡¨ðŸ‡²",
"978-9957": "Jordan ðŸ‡¯ðŸ‡´",
"978-9958": "Bosnia and Herzegovina ðŸ‡§ðŸ‡¦",
"978-9959": "Libya ðŸ‡±ðŸ‡¾",
"978-9960": "Saudi Arabia ðŸ‡¸ðŸ‡¦",
"978-9961": "Algeria ðŸ‡©ðŸ‡¿",
"978-9962": "Panama ðŸ‡µðŸ‡¦",
"978-9963": "Cyprus ðŸ‡¨ðŸ‡¾",
"978-9964": "Ghana ðŸ‡¬ðŸ‡­",
"978-9965": "Kazakhstan ðŸ‡°ðŸ‡¿",
"978-9966": "Kenya ðŸ‡°ðŸ‡ª",
"978-9967": "Kyrgyz Republic ðŸ‡°ðŸ‡¬",
"978-9968": "Costa Rica ðŸ‡¨ðŸ‡·",
"978-9969": "Algeria ðŸ‡©ðŸ‡¿",
"978-9970": "Uganda ðŸ‡ºðŸ‡¬",
"978-9971": "Singapore ðŸ‡¸ðŸ‡¬",
"978-9972": "Peru ðŸ‡µðŸ‡ª",
"978-9973": "Tunisia ðŸ‡¹ðŸ‡³",
"978-9974": "Uruguay ðŸ‡ºðŸ‡¾",
"978-9975": "Moldova ðŸ‡²ðŸ‡©",
"978-9976": "Tanzania ðŸ‡¹ðŸ‡¿",
"978-9977": "Costa Rica ðŸ‡¨ðŸ‡·",
"978-9978": "Ecuador ðŸ‡ªðŸ‡¨",
"978-9979": "Iceland ðŸ‡®ðŸ‡¸",
"978-9980": "Papua New Guinea ðŸ‡µðŸ‡¬",
"978-9981": "Morocco ðŸ‡²ðŸ‡¦",
"978-9982": "Zambia ðŸ‡¿ðŸ‡²",
"978-9983": "Gambia ðŸ‡¬ðŸ‡²",
"978-9984": "Latvia ðŸ‡±ðŸ‡»",
"978-9985": "Estonia ðŸ‡ªðŸ‡ª",
"978-9986": "Lithuania ðŸ‡±ðŸ‡¹",
"978-9987": "Tanzania ðŸ‡¹ðŸ‡¿",
"978-9988": "Ghana ðŸ‡¬ðŸ‡­",
"978-9989": "North Macedonia ðŸ‡²ðŸ‡°",
"978-99901": "Bahrain ðŸ‡§ðŸ‡­",
"978-99902": "Reserved Agency",
"978-99903": "Mauritius ðŸ‡²ðŸ‡º",
"978-99904": "CuraÃ§ao ðŸ‡¨ðŸ‡¼",
"978-99905": "Bolivia ðŸ‡§ðŸ‡´",
"978-99906": "Kuwait ðŸ‡°ðŸ‡¼",
"978-99908": "Malawi ðŸ‡²ðŸ‡¼",
"978-99909": "Malta ðŸ‡²ðŸ‡¹",
"978-99910": "Sierra Leone ðŸ‡¸ðŸ‡±",
"978-99911": "Lesotho ðŸ‡±ðŸ‡¸",
"978-99912": "Botswana ðŸ‡§ðŸ‡¼",
"978-99913": "Andorra ðŸ‡¦ðŸ‡©",
"978-99914": "International NGO Publishers",
"978-99915": "Maldives ðŸ‡²ðŸ‡»",
"978-99916": "Namibia ðŸ‡³ðŸ‡¦",
"978-99917": "Brunei Darussalam ðŸ‡§ðŸ‡³",
"978-99918": "Faroe Islands ðŸ‡«ðŸ‡´",
"978-99919": "Benin ðŸ‡§ðŸ‡¯",
"978-99920": "Andorra ðŸ‡¦ðŸ‡©",
"978-99921": "Qatar ðŸ‡¶ðŸ‡¦",
"978-99922": "Guatemala ðŸ‡¬ðŸ‡¹",
"978-99923": "El Salvador ðŸ‡¸ðŸ‡»",
"978-99924": "Nicaragua ðŸ‡³ðŸ‡®",
"978-99925": "Paraguay ðŸ‡µðŸ‡¾",
"978-99926": "Honduras ðŸ‡­ðŸ‡³",
"978-99927": "Albania ðŸ‡¦ðŸ‡±",
"978-99928": "Georgia ðŸ‡¬ðŸ‡ª",
"978-99929": "Mongolia ðŸ‡²ðŸ‡³",
"978-99930": "Armenia ðŸ‡¦ðŸ‡²",
"978-99931": "Seychelles ðŸ‡¸ðŸ‡¨",
"978-99932": "Malta ðŸ‡²ðŸ‡¹",
"978-99933": "Nepal ðŸ‡³ðŸ‡µ",
"978-99934": "Dominican Republic ðŸ‡©ðŸ‡´",
"978-99935": "Haiti ðŸ‡­ðŸ‡¹",
"978-99936": "Bhutan ðŸ‡§ðŸ‡¹",
"978-99937": "Macau ðŸ‡²ðŸ‡´",
"978-99938": "Srpska, Republic of ðŸ‡·ðŸ‡¸",
"978-99939": "Guatemala ðŸ‡¬ðŸ‡¹",
"978-99940": "Georgia ðŸ‡¬ðŸ‡ª",
"978-99941": "Armenia ðŸ‡¦ðŸ‡²",
"978-99942": "Sudan ðŸ‡¸ðŸ‡©",
"978-99943": "Albania ðŸ‡¦ðŸ‡±",
"978-99944": "Ethiopia ðŸ‡ªðŸ‡¹",
"978-99945": "Namibia ðŸ‡³ðŸ‡¦",
"978-99946": "Nepal ðŸ‡³ðŸ‡µ",
"978-99947": "Tajikistan ðŸ‡¹ðŸ‡¯",
"978-99948": "Eritrea ðŸ‡ªðŸ‡·",
"978-99949": "Mauritius ðŸ‡²ðŸ‡º",
"978-99950": "Cambodia ðŸ‡°ðŸ‡­",
"978-99951": "Reserved Agency",
"978-99952": "Mali ðŸ‡²ðŸ‡±",
"978-99953": "Paraguay ðŸ‡µðŸ‡¾",
"978-99954": "Bolivia ðŸ‡§ðŸ‡´",
"978-99955": "Srpska, Republic of ðŸ‡·ðŸ‡¸",
"978-99956": "Albania ðŸ‡¦ðŸ‡±",
"978-99957": "Malta ðŸ‡²ðŸ‡¹",
"978-99958": "Bahrain ðŸ‡§ðŸ‡­",
"978-99959": "Luxembourg ðŸ‡±ðŸ‡º",
"978-99960": "Malawi ðŸ‡²ðŸ‡¼",
"978-99961": "El Salvador ðŸ‡¸ðŸ‡»",
"978-99962": "Mongolia ðŸ‡²ðŸ‡³",
"978-99963": "Cambodia ðŸ‡°ðŸ‡­",
"978-99964": "Nicaragua ðŸ‡³ðŸ‡®",
"978-99965": "Macau ðŸ‡²ðŸ‡´",
"978-99966": "Kuwait ðŸ‡°ðŸ‡¼",
"978-99967": "Paraguay ðŸ‡µðŸ‡¾",
"978-99968": "Botswana ðŸ‡§ðŸ‡¼",
"978-99969": "Oman ðŸ‡´ðŸ‡²",
"978-99970": "Haiti ðŸ‡­ðŸ‡¹",
"978-99971": "Myanmar ðŸ‡²ðŸ‡²",
"978-99972": "Faroe Islands ðŸ‡«ðŸ‡´",
"978-99973": "Mongolia ðŸ‡²ðŸ‡³",
"978-99974": "Bolivia ðŸ‡§ðŸ‡´",
"978-99975": "Tajikistan ðŸ‡¹ðŸ‡¯",
"978-99976": "Srpska, Republic of ðŸ‡·ðŸ‡¸",
"978-99977": "Rwanda ðŸ‡·ðŸ‡¼",
"978-99978": "Mongolia ðŸ‡²ðŸ‡³",
"978-99979": "Honduras ðŸ‡­ðŸ‡³",
"978-99980": "Bhutan ðŸ‡§ðŸ‡¹",
"978-99981": "Macau ðŸ‡²ðŸ‡´",
"978-99982": "Benin ðŸ‡§ðŸ‡¯",
"978-99983": "El Salvador ðŸ‡¸ðŸ‡»",
"978-99984": "Brunei Darussalam ðŸ‡§ðŸ‡³",
"978-99985": "Tajikistan ðŸ‡¹ðŸ‡¯",
"978-99986": "Myanmar ðŸ‡²ðŸ‡²",
"978-99987": "Luxembourg ðŸ‡±ðŸ‡º",
"978-99988": "Sudan ðŸ‡¸ðŸ‡©",
"978-99989": "Paraguay ðŸ‡µðŸ‡¾",
"978-99990": "Ethiopia ðŸ‡ªðŸ‡¹",
"978-99992": "Oman ðŸ‡´ðŸ‡²",
"978-99993": "Mauritius ðŸ‡²ðŸ‡º",
"979-10": "France ðŸ‡«ðŸ‡·",
"979-11": "Korea, Republic ðŸ‡°ðŸ‡·",
"979-12": "Italy ðŸ‡®ðŸ‡¹",
"979-8": "United States ðŸ‡ºðŸ‡¸"
};
        let currentISBN = '';

        // Function to draw the image on canvas
        function drawCanvas() {
            // Clear the canvas
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            // Draw the image portion based on the current offsets
            ctx.drawImage(imageData, offsetX, offsetY, canvasWidth, canvasHeight, 0, 0, canvasWidth, canvasHeight);


        }

        // Calculate ISBN for a given pixel (x, y) with your updated formula
        function calculateISBN(x, y) {
            // Calculate the relative position in the entire image grid
            const isbnIndex = (x + (y * imageWidth)) * isbnPerPixel;

            // Ensure the ISBN starts at 978000000000
            return 978000000000 + isbnIndex;
        }

        // Match ISBN to country code based on its prefix
        function getCountryForISBN(isbn) {
            const isbnStr = isbn.toString();

            for (let prefix in countries) {
                // Remove the hyphen from the country prefix for comparison
                const cleanPrefix = prefix.replace("-", "");
                
                // Check if the ISBN starts with the cleaned-up prefix
                if (isbnStr.startsWith(cleanPrefix)) {
                    return { country: countries[prefix], prefix: cleanPrefix };  // Return country info and prefix
                }
            }
            return null; // No match found
        }

// Helper function to pad the prefix to 12 digits
function padToISBN(prefix, padChar) {
    const basePrefix = prefix.replace("-", ""); // Remove the hyphen
    const paddingLength = 12 - basePrefix.length; // Calculate the required padding
    return parseInt(basePrefix + padChar.repeat(paddingLength), 10); // Pad and convert to number
}

        function highlightCountryOverlay() {
    overlayCtx.clearRect(0, 0, canvasWidth, canvasHeight); // Clear overlay canvas

    const cursorX = event.offsetX; // Mouse cursor position relative to canvas
    const cursorY = event.offsetY;

    // Map cursor position to image space
    const imageX = Math.floor((cursorX / canvasWidth) * imageWidth) + offsetX;
    const imageY = Math.floor((cursorY / canvasHeight) * imageHeight) + offsetY;

    const isbn = calculateISBN(cursorX + offsetX, cursorY + offsetY); 
    const countryData = getCountryForISBN(isbn);

    if (countryData) {
        const prefix = countryData.prefix;

        // Calculate the start and end ISBNs for the country range
        const countryStartISBN = padToISBN(prefix, "0"); // Pad with zeros for the start
        const countryEndISBN = padToISBN(prefix, "9");   // Pad with nines for the end

        // Calculate start and end rows in image space
        const countryStartRow = Math.floor((countryStartISBN - 978000000000) / isbnPerPixel / imageWidth);
        const countryEndRow = Math.floor((countryEndISBN - 978000000000) / isbnPerPixel / imageWidth);

        // Directly map and clamp the range to canvas space considering offsetY
        const clampedStartRow = Math.max(
            0,
            Math.min(
                canvasHeight,
                countryStartRow - offsetY
            )
        );

        const clampedEndRow = Math.max(
            0,
            Math.min(
                canvasHeight,
                countryEndRow - offsetY 
            )
        );

        // Debugging: Log dimensions
        console.log("Country Range:", {
            countryStartISBN,
            countryEndISBN,
            countryStartRow,
            countryEndRow,
            clampedStartRow,
            clampedEndRow,
        });


        // Draw rectangles
        overlayCtx.globalAlpha = 0.4; // Set transparency
        overlayCtx.fillStyle = "yellow";
        overlayCtx.fillRect(0, clampedStartRow, canvasWidth, clampedEndRow - clampedStartRow);


        // Draw the country/language info near the mouse cursor with a highlight background
        const textWidth = countryData.country.length * 8; // Calculate text width dynamically
        overlayCtx.fillStyle = "yellow";
        overlayCtx.fillRect(cursorX + 12, cursorY - 10, textWidth, 24); // Highlight background
        overlayCtx.fillStyle = "black";
        overlayCtx.globalAlpha = 1; // Reset transparency
        overlayCtx.font = "16px Arial";
        overlayCtx.fillText(countryData.country, cursorX + 16, cursorY + 10);
    }
}



        // Handle mouse down for dragging
        mainCanvas.addEventListener('mousedown', (e) => {
            dragging = true;
            startX = e.offsetX - offsetX;
            startY = e.offsetY - offsetY;
        });

        // Handle mouse move for dragging (move image with mouse)
        mainCanvas.addEventListener('mousemove', (e) => {
            if (dragging) {
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;

                // Move image in the same direction as the mouse movement
                offsetX = dx;
                offsetY = dy;

                // Boundary check to prevent going out of bounds horizontally
                if (offsetX < 0) offsetX = 0;
                if (offsetX > imageWidth - canvasWidth) offsetX = imageWidth - canvasWidth;

                // Boundary check to prevent going out of bounds vertically
                if (offsetY < 0) offsetY = 0;
                if (offsetY > imageHeight - canvasHeight) offsetY = imageHeight - canvasHeight;

                drawCanvas(); // Redraw canvas with new offsets
            }
            else
            {
                highlightCountryOverlay(e); // Highlight country zone on overlay canvas
            }
        });
        // Handle mouse up to stop dragging
        mainCanvas.addEventListener('mouseup', () => {
            dragging = false;
        });

        // Handle mouse leave to stop dragging
        mainCanvas.addEventListener('mouseleave', () => {
            dragging = false;
        });

        // Draw when the image is loaded
        imageData.onload = () => {
            drawCanvas();
        };
    </script>
</body>
</html>


